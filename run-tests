# Created by: WestleyR
# email: westleyr@nym.hush.com
# Date: Sep 7, 2019
# https://github.com/WestleyR/list-files
# Version-1.0.1
#
# The Clear BSD License
#
# Copyright (c) 2019 WestleyR
# All rights reserved.
#
# This software is licensed under a Clear BSD License.
#

# Check and insure 'bc' is installed, if not, the tests that
# need bc will skip
if ! command -v "bc"; then
	echo "WARNING: 'bc' not found in PATH, bc is needed for some tests"
fi

echo "Running all tests..."
echo

all_tests_num=0
tests_failed_num=0
tests_failed=""

test_files=`ls -1 tests/ | sort -n`

for t in $test_files; do
	if [ -f "tests/${t}" ]; then
		echo "Testing: ${t}:"
		if ! bash "tests/${t}"; then
			echo "test failed: ${t}"
			((tests_failed_num+=1))
			tests_failed=`echo "${test_failed} ${t}"`
		fi
		((all_tests_num+=1))
	fi
done

echo
echo "All tests ran with ${tests_failed_num} test(s) failed (or skipped), of ${all_tests_num}"

#
# End run-tests
#
